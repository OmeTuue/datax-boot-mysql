(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3be233"],{"05a0":function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter-container"},[e("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleRunJob}},[t._v("\n      启动任务\n    ")]),t._v(" "),e("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"Type",clearable:""},on:{change:t.handleJobChange,clear:t.handleJobClear},model:{value:t.jobId,callback:function(n){t.jobId=n},expression:"jobId"}},t._l(t.pluginList,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),e("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.getJobList}},[t._v("\n      刷新任务\n    ")]),t._v(" "),e("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-trash"},on:{click:function(n){t.templateJson={}}}},[t._v("\n      清空json\n    ")]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.jobId,expression:"jobId"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-document"},on:{click:t.handleViewJobLog}},[t._v("\n      查看日志\n    ")])],1),t._v(" "),e("div",{staticClass:"editor-container"},[e("json-editor",{ref:"jsonEditor",model:{value:t.templateJson,callback:function(n){t.templateJson=n},expression:"templateJson"}})],1),t._v(" "),e("el-dialog",{attrs:{title:"日志查看",visible:t.logShow},on:{"update:visible":function(n){t.logShow=n}}},[e("div",{staticClass:"log-container"},[e("pre",{attrs:{loading:t.logLoading},domProps:{textContent:t._s(t.logContent)}})]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.loadLog()}}},[t._v("\n        刷新日志\n      ")])],1)])],1)},i=[],r=(e("ac4d"),e("8a81"),e("ac6a"),e("b775"));function a(t){return Object(r["a"])({url:"/runJob",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/runJobLog",method:"post",data:t})}var u=e("d4a6"),c=e("fa7e"),l={components:{JsonEditor:c["a"]},data:function(){return{templateJson:{},listQuery:{current:1,size:200},pluginList:[1,2],jobId:void 0,jobLogQuery:{id:void 0,fromLineNum:0},logContent:void 0,logShow:!1,logLoading:!1}},created:function(){this.getJobList()},methods:{getJobList:function(){var t=this;Object(u["d"])(this.listQuery).then(function(n){console.log(n),t.jobId=void 0,t.jobLogQuery.fromLineNum=0,t.logContent=void 0;var e=n.records;t.pluginList=e})},handleRunJob:function(){var t=this,n={jobConfigId:this.jobId,jobJson:this.templateJson};void 0===this.jobId?a(this.templateJson).then(function(n){t.$notify({title:"Success",message:"启动成功",type:"success",duration:2e3}),t.handleViewJobLog()}):s(n).then(function(n){t.$notify({title:"Success",message:"启动成功",type:"success",duration:2e3})})},handleViewJobLog:function(){void 0!==this.jobId&&(this.jobLogQuery.id=this.jobId,!1===this.logShow&&(this.logShow=!0),this.loadLog())},loadLog:function(){var t=this;this.logLoading=!0,Object(u["f"])(this.jobLogQuery).then(function(n){"\n"===n.logContent||(t.logContent=n.logContent),t.logLoading=!1})},handleJobChange:function(t){this.jobId=t,this.jobLogQuery.fromLineNum=0;var n=!0,e=!1,o=void 0;try{for(var i,r=this.pluginList[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var a=i.value;if(a.id===this.jobId){this.templateJson=JSON.parse(a.configJson);break}}}catch(s){e=!0,o=s}finally{try{n||null==r.return||r.return()}finally{if(e)throw o}}},handleJobClear:function(){this.jobId=void 0,this.logShow=!1,this.logContent=void 0}}},f=l,d=(e("460e"),e("2877")),b=Object(d["a"])(f,o,i,!1,null,"781301f5",null);n["default"]=b.exports},1169:function(t,n,e){var o=e("2d95");t.exports=Array.isArray||function(t){return"Array"==o(t)}},"37c8":function(t,n,e){n.f=e("2b4c")},"3a72":function(t,n,e){var o=e("7726"),i=e("8378"),r=e("2d00"),a=e("37c8"),s=e("86cc").f;t.exports=function(t){var n=i.Symbol||(i.Symbol=r?{}:o.Symbol||{});"_"==t.charAt(0)||t in n||s(n,t,{value:a.f(t)})}},"460e":function(t,n,e){"use strict";var o=e("76aa"),i=e.n(o);i.a},"67ab":function(t,n,e){var o=e("ca5a")("meta"),i=e("d3f4"),r=e("69a8"),a=e("86cc").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("79e5")(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,o,{value:{i:"O"+ ++s,w:{}}})},f=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,o)){if(!u(t))return"F";if(!n)return"E";l(t)}return t[o].i},d=function(t,n){if(!r(t,o)){if(!u(t))return!0;if(!n)return!1;l(t)}return t[o].w},b=function(t){return c&&h.NEED&&u(t)&&!r(t,o)&&l(t),t},h=t.exports={KEY:o,NEED:!1,fastKey:f,getWeak:d,onFreeze:b}},"76aa":function(t,n,e){},"7bbc":function(t,n,e){var o=e("6821"),i=e("9093").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(n){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):i(o(t))}},"8a81":function(t,n,e){"use strict";var o=e("7726"),i=e("69a8"),r=e("9e1e"),a=e("5ca1"),s=e("2aba"),u=e("67ab").KEY,c=e("79e5"),l=e("5537"),f=e("7f20"),d=e("ca5a"),b=e("2b4c"),h=e("37c8"),p=e("3a72"),g=e("d4c0"),v=e("1169"),m=e("cb7c"),y=e("d3f4"),j=e("6821"),w=e("6a99"),J=e("4630"),S=e("2aeb"),O=e("7bbc"),C=e("11e9"),L=e("86cc"),E=e("0d58"),_=C.f,x=L.f,I=O.f,k=o.Symbol,N=o.JSON,P=N&&N.stringify,V="prototype",Q=b("_hidden"),F=b("toPrimitive"),$={}.propertyIsEnumerable,A=l("symbol-registry"),T=l("symbols"),D=l("op-symbols"),K=Object[V],M="function"==typeof k,W=o.QObject,z=!W||!W[V]||!W[V].findChild,R=r&&c(function(){return 7!=S(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,n,e){var o=_(K,n);o&&delete K[n],x(t,n,e),o&&t!==K&&x(K,n,o)}:x,Y=function(t){var n=T[t]=S(k[V]);return n._k=t,n},G=M&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},q=function(t,n,e){return t===K&&q(D,n,e),m(t),n=w(n,!0),m(e),i(T,n)?(e.enumerable?(i(t,Q)&&t[Q][n]&&(t[Q][n]=!1),e=S(e,{enumerable:J(0,!1)})):(i(t,Q)||x(t,Q,J(1,{})),t[Q][n]=!0),R(t,n,e)):x(t,n,e)},B=function(t,n){m(t);var e,o=g(n=j(n)),i=0,r=o.length;while(r>i)q(t,e=o[i++],n[e]);return t},H=function(t,n){return void 0===n?S(t):B(S(t),n)},U=function(t){var n=$.call(this,t=w(t,!0));return!(this===K&&i(T,t)&&!i(D,t))&&(!(n||!i(this,t)||!i(T,t)||i(this,Q)&&this[Q][t])||n)},X=function(t,n){if(t=j(t),n=w(n,!0),t!==K||!i(T,n)||i(D,n)){var e=_(t,n);return!e||!i(T,n)||i(t,Q)&&t[Q][n]||(e.enumerable=!0),e}},Z=function(t){var n,e=I(j(t)),o=[],r=0;while(e.length>r)i(T,n=e[r++])||n==Q||n==u||o.push(n);return o},tt=function(t){var n,e=t===K,o=I(e?D:j(t)),r=[],a=0;while(o.length>a)!i(T,n=o[a++])||e&&!i(K,n)||r.push(T[n]);return r};M||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),n=function(e){this===K&&n.call(D,e),i(this,Q)&&i(this[Q],t)&&(this[Q][t]=!1),R(this,t,J(1,e))};return r&&z&&R(K,t,{configurable:!0,set:n}),Y(t)},s(k[V],"toString",function(){return this._k}),C.f=X,L.f=q,e("9093").f=O.f=Z,e("52a7").f=U,e("2621").f=tt,r&&!e("2d00")&&s(K,"propertyIsEnumerable",U,!0),h.f=function(t){return Y(b(t))}),a(a.G+a.W+a.F*!M,{Symbol:k});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)b(nt[et++]);for(var ot=E(b.store),it=0;ot.length>it;)p(ot[it++]);a(a.S+a.F*!M,"Symbol",{for:function(t){return i(A,t+="")?A[t]:A[t]=k(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var n in A)if(A[n]===t)return n},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!M,"Object",{create:H,defineProperty:q,defineProperties:B,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&a(a.S+a.F*(!M||c(function(){var t=k();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){var n,e,o=[t],i=1;while(arguments.length>i)o.push(arguments[i++]);if(e=n=o[1],(y(n)||void 0!==t)&&!G(t))return v(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!G(n))return n}),o[1]=n,P.apply(N,o)}}),k[V][F]||e("32e9")(k[V],F,k[V].valueOf),f(k,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},ac4d:function(t,n,e){e("3a72")("asyncIterator")},b8b0:function(t,n,e){"use strict";var o=e("f84c"),i=e.n(o);i.a},d4a6:function(t,n,e){"use strict";e.d(n,"d",function(){return i}),e.d(n,"c",function(){return r}),e.d(n,"e",function(){return a}),e.d(n,"a",function(){return s}),e.d(n,"b",function(){return u}),e.d(n,"f",function(){return c});var o=e("b775");function i(t){return Object(o["a"])({url:"/jobConfig",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/jobConfig/"+t,method:"get"})}function a(t){return Object(o["a"])({url:"/jobConfig/",method:"put",data:t})}function s(t){return Object(o["a"])({url:"/jobConfig/",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/jobConfig/",method:"delete",params:t})}function c(t){return Object(o["a"])({url:"/viewJobLog",method:"get",params:t})}},d4c0:function(t,n,e){var o=e("0d58"),i=e("2621"),r=e("52a7");t.exports=function(t){var n=o(t),e=i.f;if(e){var a,s=e(t),u=r.f,c=0;while(s.length>c)u.call(t,a=s[c++])&&n.push(a)}return n}},f84c:function(t,n,e){},fa7e:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"json-editor"},[e("textarea",{ref:"textarea"})])},i=[],r=e("56b3"),a=e.n(r);e("0dd0"),e("a7be"),e("acdf"),e("f9d4"),e("8822"),e("d2de");e("ae67");var s={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(t){var n=this.jsonEditor.getValue();t!==n&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var t=this;this.jsonEditor=a.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",function(n){t.$emit("changed",n.getValue()),t.$emit("input",n.getValue())})},methods:{getValue:function(){return this.jsonEditor.getValue()}}},u=s,c=(e("b8b0"),e("2877")),l=Object(c["a"])(u,o,i,!1,null,"fad11014",null);n["a"]=l.exports}}]);